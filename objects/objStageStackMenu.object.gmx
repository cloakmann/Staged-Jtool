<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprStageStackMenu</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-40</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>objStageStackMenu</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///fix at mid left row
x = 0;
y = room_height / 2;


drawY = y - 186 + 1;
create = instance_create(x,drawY,objStageStackCreate)
create.caption = "Create New Map to Storage"

drawY += 60
add = instance_create(x,drawY,objStageStackAdd)
add.caption = "Add Existing Maps"

drawY += 42
save = instance_create(x,drawY,objStageStackSave)
save.caption = "Save Current Map"


drawY += 42
prev = instance_create(x,drawY,objStageStackPrev)
prev.caption = "Go to Previous Map"

drawY += 42
next = instance_create(x,drawY,objStageStackNext)
next.caption = "Go to Next Map"

drawY += 42
massSave = instance_create(x,drawY,objStageStackMassSave)
massSave.caption = "Save All Resources in the Storage"

drawY += 42
remove = instance_create(x,drawY,objStageStackRemove)
remove.caption = "Remove Current Map From Storage"

drawY += 42
clear = instance_create(x,drawY,objStageStackClear)
clear.caption = "Clear Map Storage"

buttonVisible = false;

event_user(0)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///save the maps in ds_map
//mapStorage = ds_map_create()

//mapStorage = ds_list_create();
mapStorage = ds_map_create();

//mapStorage[?"startup.jmap"] = defaultStartupMap;

defaultStartupMap = "jtool|1.3.5|inf:0|dot:0|sav:1|bor:0|px:40u8g00000000|py:40ubg00000000|ps:1|pg:1|objects:-h01f01g01h0-g0kg0

data repeated below for easy parsing by other tools
objects: (x, y, type)
352 416 1 384 416 1 416 416 1 384 384 20 
version:1.3.5
infinitejump:0
dotkid:0
savetype:1
bordertype:0
playersavex:401
playersavey:407.0000000000000000
playersavexscale:1
"

defaultStartupMap2 = "jtool|1.3.5|inf:0|dot:0|sav:1|bor:0|px:40tug00000000|py:40ubj6ag00000|ps:1|pg:1|objects:-9gfkgflgfjg1rg1og1ng1mggog7m04jg5ig7gg-l0fl0fi01o01k01401901a06s0bf88b0350-m0fl0fi0f60f70f80f901pg1o01k01e01d01a0140150hd04qg3n03m0-k0fi01s01qg1o01k01l0140ho0g40aeg8rg5pg6i0390-g0fi01qg1h01l01j01b0hj0an84m06603e0cg0jg0j40c40kg0-50f806k08ng5mg6j03gg680-b0f6g1g019g1c0h9g8d0660-hgfc0hqggqg-igfc0fd0bp0bo0478-ggf5g7ig7i079078g7f0-h0f9g1j01qg1i01401a018g1b01e01f01g01h0h8galgal04c0450-c0fg016gh6g69g6c06g0-d0fg03l066g7a83d03g0jo0co0-8g1rg1og1kg5qg3mg7h0bfg9bga7085g-ag1rg1ogao06n0amg5qg4pg8lg9l06j0-5g1ogbr05ng7hg-6g1ogbqo3kg36g-7g1og1kg16ghog3rg47g-i01qg1401e068g6a0-e01o01l01g01d05s04p03j074o3b05f0-j01qg1401e04rg3o03k03l03i04d05c0-lg1g05f04h07dg7d0570480-f01l01j01a01b01d09sg6o03qg3h06g0a60360590-701hg1dg6gg3c039g-901dg19g6h06c064g58g-601gg3hg8fg5fg3dg7b04a0-801dg1c019g14ggdgh9g6hg8bg9b0960-401806kg6jg6ig5a0-a019g1g0g9gam08h06dg5f0360jc0cc0-fg7n89sg-4gbr08b0-bg6rg6ogbi8770-78bq8-cgal8bi8-kg9rg7ag7a0cg0jg0-mg7l07lg-dgbi83808ao85g950-dob7o-ega4o680-k897o-jg668-fojr8-48lrg

data repeated below for easy parsing by other tools
objects: (x, y, type)
528 176 15 560 176 15 544 544 15 544 576 15 448 512 15 448 384 15 448 544 15 496 176 15 448 576 15 128 32 15 80 224 15 256 432 15 256 464 15 48 400 15 64 576 15 176 416 15 96 576 15 128 576 15 160 576 15 288 464 15 384 256 15 384 288 15 752 144 1 752 176 1 752 208 1 656 48 1 656 80 1 656 112 1 656 144 1 656 208 1 656 176 1 624 176 1 480 416 1 592 176 1 720 448 1 720 416 1 640 320 1 768 512 1 720 384 1 688 576 1 720 480 1 720 512 1 640 544 1 640 512 1 640 576 1 512 576 1 512 544 1 512 512 1 544 512 1 384 560 1 448 416 1 416 384 1 384 224 1 528 112 1 528 144 1 544 384 1 544 352 1 544 320 1 480 384 1 480 352 1 432 96 1 304 160 1 400 64 1 304 96 1 304 128 1 256 128 1 128 0 1 80 112 1 176 128 1 16 128 1 176 160 1 176 192 1 80 256 1 320 576 1 288 576 1 192 576 1 176 224 1 256 224 1 0 480 1 0 448 1 0 416 1 0 512 1 0 544 1 0 576 1 32 576 1 192 416 1 144 416 1 192 352 1 160 544 1 192 544 1 320 480 1 320 448 1 384 192 1 224 352 1 224 384 1 224 416 1 384 320 1 288 320 1 288 352 1 320 416 1 352 416 1 384 416 1 416 416 1 656 176 16 656 112 17 720 432 17 720 432 16 640 512 17 480 384 17 304 128 16 176 192 16 176 128 17 80 256 17 176 224 17 288 576 17 144 416 17 0 512 16 616 368 7 616 384 10 576 384 4 640 208 10 608 208 6 592 208 10 336 512 10 560 416 10 544 416 10 720 144 5 752 112 3 736 16 11 736 48 11 752 240 6 720 208 5 688 208 4 712 104 11 728 80 11 528 0 6 512 32 6 496 0 6 464 0 6 624 32 8 592 32 5 624 48 5 592 144 3 656 240 6 480 32 6 576 192 10 576 176 7 560 208 8 544 208 9 552 272 10 784 368 9 784 352 9 752 512 8 752 528 9 752 480 4 768 320 5 768 544 6 640 352 6 672 320 4 720 352 3 720 576 4 688 512 5 672 464 11 640 464 11 640 480 3 544 592 7 560 592 7 608 576 3 576 576 3 512 480 3 360 544 11 352 560 5 416 560 4 456 240 11 448 512 6 480 320 3 456 304 11 464 400 7 448 400 7 480 208 6 416 192 8 528 80 3 544 288 3 496 176 4 544 480 3 448 480 3 464 176 5 416 352 3 384 352 6 456 272 11 416 144 7 416 160 6 400 176 7 432 128 6 432 64 3 432 48 7 400 32 3 368 64 8 304 192 6 288 224 8 400 96 6 368 64 5 368 144 11 304 64 3 224 16 8 192 0 5 224 64 7 240 128 8 224 128 9 240 144 9 256 160 6 352 192 5 256 96 3 128 32 6 192 64 4 176 96 3 96 144 10 80 80 3 48 144 8 64 128 9 112 112 4 16 160 6 144 160 5 120 312 11 80 288 6 96 240 7 64 192 3 64 224 6 128 304 3 304 560 7 288 560 7 256 416 4 224 544 8 208 528 7 192 528 7 176 256 6 200 288 7 216 304 8 48 304 8 32 304 9 24 320 7 24 336 10 64 352 10 64 352 3 64 384 6 32 416 4 120 520 9 72 496 6 104 464 4 32 544 3 160 400 7 144 400 7 144 448 6 128 336 6 160 352 5 160 512 3 192 448 6 96 560 5 128 560 4 288 480 4 256 480 5 256 256 6 224 320 3 384 256 6 288 288 3 384 288 3 352 320 5 352 400 7 320 384 3 744 376 19 640 288 19 640 288 12 384 528 12 384 528 19 256 192 19 256 192 12 384 384 12 384 384 19 0 384 19 0 384 12 752 8 21 384 384 20 
version:1.3.5
infinitejump:0
dotkid:0
savetype:1
bordertype:0
playersavex:381
playersavey:407.1998596191406200
playersavexscale:1
"

defaultStartupMap3 = "jtool|1.3.5|inf:0|dot:0|sav:1|bor:0|px:40go000000000|py:40netdc000000|ps:-1|pg:1|objects:-d0fg03g03d07a866g3l0-c0fg016gh6g6g06c069g-h0f9g1h01g01f01e01b018g1a01401i01qg1j0h8g4504c0al0alg-ggf5g7f078g7907i07ig-igfd0fc0478bo0bp0-hgfc0gqghqg-b0f6g1c019g1g0h9g6608d0-50f806803gg6j05mg8ng6k0-g0fi01b01j01l01h01qghj03e06604m0an8kg0jg0cg0-k0fi01401l01k01o01qg1s0g40ho03906i05pg8rgaeg-m0f90f80f70f60fi0fl01501401a01d01e01k01o01pghd03m03n04qg-l0fi0fl01a01901401k01o03508b0bf86s0-9gfjgflgfkg1mg1ng1og1rggog7gg5ig4jg7m0-a01g019gg9g3605f06dg8h0am0-401805a06ig6jg6kg-8014g19g1c01dgh9ggdg9609b08bg6hg-601gg4a07b03dg5fg8fg3hg-9019g1dg58g64g6c06h0-701dg1hg39g3c06gg-f01d01b01a01j01l0590360a606g03h03qg6o09sg-lg1g04805707d07dg4h05f0-j01e01401qg5c04d03i03l03k03o04rg-e01d01g01l01o05f03b074o3j04p05s0-i01e01401qg6a068g-7g16g1kg1oghog47g3rg-6g1og36g3kgbqo-5g1og7hg5ngbr0-ag1og1rg6j09l08lg4pg5qgamg6n0ao0-8g1kg1og1rg85ga709bgbfg7h03mg5qg-jg668-k897o-eg680a4o-dob7o-dg95085g8ao380bi8-mg7lg7l0-kg7a07ag9rg-cgbi8al8-78bq8-bg770bi86og6rg-4g8b0br0-fg9sg7n8-48lrg-fojr8

data repeated below for easy parsing by other tools
objects: (x, y, type)
384 288 15 384 256 15 176 416 15 48 400 15 288 464 15 256 464 15 256 432 15 80 224 15 128 32 15 448 384 15 448 512 15 160 576 15 128 576 15 96 576 15 64 576 15 448 576 15 544 576 15 448 544 15 544 544 15 496 176 15 560 176 15 528 176 15 384 192 1 176 192 1 128 0 1 16 128 1 176 128 1 256 128 1 304 128 1 400 64 1 176 160 1 304 160 1 304 96 1 432 96 1 288 352 1 224 352 1 192 352 1 480 352 1 544 352 1 384 560 1 320 480 1 0 480 1 720 480 1 288 320 1 384 320 1 544 320 1 640 320 1 320 448 1 0 448 1 720 448 1 80 112 1 528 112 1 656 112 1 656 80 1 656 48 1 656 208 1 752 208 1 528 144 1 656 144 1 752 144 1 80 256 1 416 416 1 384 416 1 352 416 1 320 416 1 224 416 1 144 416 1 192 416 1 0 416 1 448 416 1 720 416 1 480 416 1 256 224 1 176 224 1 384 224 1 224 384 1 480 384 1 544 384 1 416 384 1 720 384 1 0 512 1 544 512 1 512 512 1 640 512 1 720 512 1 768 512 1 32 576 1 0 576 1 192 576 1 288 576 1 320 576 1 512 576 1 640 576 1 688 576 1 192 544 1 160 544 1 0 544 1 512 544 1 640 544 1 592 176 1 624 176 1 656 176 1 752 176 1 176 192 16 176 128 17 304 128 16 656 112 17 80 256 17 144 416 17 720 432 16 720 432 17 176 224 17 480 384 17 0 512 16 640 512 17 288 576 17 656 176 16 72 496 6 120 520 9 128 336 6 24 336 10 120 312 11 32 304 9 48 304 8 216 304 8 128 304 3 456 304 11 560 592 7 544 592 7 192 528 7 208 528 7 752 528 9 456 272 11 552 272 10 712 104 11 96 240 7 456 240 11 656 240 6 752 240 6 224 16 8 736 16 11 784 368 9 616 368 7 64 192 3 352 192 5 304 192 6 416 192 8 576 192 10 192 0 5 464 0 6 496 0 6 528 0 6 64 128 9 224 128 9 240 128 8 432 128 6 192 64 4 224 64 7 304 64 3 368 64 5 368 64 8 432 64 3 144 160 5 16 160 6 256 160 6 416 160 6 176 96 3 256 96 3 400 96 6 160 352 5 64 352 3 64 352 10 384 352 6 416 352 3 720 352 3 640 352 6 784 352 9 128 560 4 96 560 5 288 560 7 304 560 7 416 560 4 352 560 5 256 480 5 288 480 4 448 480 3 544 480 3 512 480 3 640 480 3 752 480 4 352 320 5 224 320 3 24 320 7 480 320 3 672 320 4 768 320 5 192 448 6 144 448 6 112 112 4 752 112 3 80 80 3 528 80 3 728 80 11 432 48 7 624 48 5 736 48 11 480 208 6 544 208 9 560 208 8 688 208 4 720 208 5 592 208 10 608 208 6 640 208 10 48 144 8 96 144 10 240 144 9 368 144 11 416 144 7 592 144 3 720 144 5 384 288 3 288 288 3 200 288 7 80 288 6 544 288 3 384 256 6 256 256 6 176 256 6 32 416 4 256 416 4 544 416 10 560 416 10 352 400 7 144 400 7 160 400 7 448 400 7 464 400 7 104 464 4 640 464 11 672 464 11 64 224 6 288 224 8 128 32 6 400 32 3 480 32 6 592 32 5 624 32 8 512 32 6 320 384 3 64 384 6 576 384 4 616 384 10 160 512 3 448 512 6 688 512 5 752 512 8 336 512 10 576 576 3 608 576 3 720 576 4 32 544 3 224 544 8 360 544 11 768 544 6 400 176 7 464 176 5 496 176 4 576 176 7 752 8 21 744 376 19 384 384 20 384 384 19 384 384 12 
version:1.3.5
infinitejump:0
dotkid:0
savetype:1
bordertype:0
playersavex:38
playersavey:119.4596557617187500
playersavexscale:-1
"

mapStorage[?"startup.jmap"] = defaultStartupMap;
mapStorage[?"demo.jmap"] = defaultStartupMap2;
mapStorage[?"demo2.jmap"] = defaultStartupMap3;

//currentMapIndex = 0;
currentMapKey = "startup.jmap";
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///shall be singleton
if instance_number(object_index) &gt; 1 instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if scrTriggerMenu() event_user(0)
else {
    visible = false;
    exit;
}

with objButton visible = other.visible
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///update holistic visibility
visible = true

/*
visible = false
visible = visible or create.visible
visible = visible or add.visible
visible = visible or save.visible
visible = visible or prev.visible
visible = visible or next.visible
visible = visible or massSave.visible
visible = visible or remove.visible
visible = visible or clear.visible
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
var drawX = 50,drawY = 50,width = 250, height = 150;

//draw frame
draw_set_color(c_gray)
draw_rectangle(drawX,drawY,drawX + width,drawY + height,0)
draw_set_color(c_black)
draw_rectangle(drawX,drawY,drawX + width,drawY + height,1)



//draw content
scrSetAlign(1);
drawX += 20;

//display total maps
drawY += 20;
draw_set_color(c_white);
draw_text(drawX,drawY,"total maps in storage: " + string(ds_map_size(mapStorage)));


//display current map
drawY += 20;
drawY += 20;
var width = string_width("current map: ");
draw_text(drawX,drawY,"current map: ");

draw_set_font(font_small_bold);
draw_text(drawX + width, drawY, parseStringToSize(currentMapKey,25));
draw_set_font(font_small);


var previousMap;
if ds_map_empty(mapStorage) previousMap = "[empty]";
else if currentMapKey == ds_map_find_first(mapStorage) 
    previousMap = ds_map_find_last(mapStorage);
else previousMap = ds_map_find_previous(mapStorage,currentMapKey);

previousMap = parseStringToSize(previousMap,25)

//display previous map
drawY += 20;
draw_text(drawX,drawY,"previous map: " + previousMap);


drawY += 20;
var nextMap;
if ds_map_empty(mapStorage) nextMap = "[empty]";
else if currentMapKey == ds_map_find_last(mapStorage) 
    nextMap = ds_map_find_first(mapStorage);
else nextMap = ds_map_find_next(mapStorage,currentMapKey);

nextMap = parseStringToSize(nextMap,25)

//display next map
draw_text(drawX,drawY,"next map: " + nextMap);

scrResetUI();

draw_self();

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
